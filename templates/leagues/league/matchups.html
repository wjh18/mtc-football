{% extends 'leagues/_league_base.html' %}

{% block title %}Weekly Matchups | Week {{ week_num }} | Season {{ season.season_number }} | {{ league.name }}{% endblock title %}

{% block content %}
  {% if week_num <= 18 %}
    <h2>Regular Season
  {% elif week_num == 19 %}
    <h2>Wildcard Round
  {% elif week_num == 20 %}
    <h2>Divisional Round
  {% elif week_num == 21 %}
    <h2>Conference Finals
  {% elif week_num == 22 %}
    <h2>Championship
  {% endif %}&middot; Week {{ week_num }} &middot; Season {{ season.season_number }}</h2>
  <a href="{% url 'leagues:league_detail' league.slug %}">&larr; League Home</a>
  <hr>

  <div class="row">
    <nav aria-label="...">
      <ul class="pagination pagination-sm">
        {% for w in num_weeks %}
          <li class="page-item{% if week_num == w %} active" aria-current="page{% endif %}">
            <a class="page-link" href="{% url 'leagues:weekly_matchups_by_week' league.slug w %}">W{{ w }}</a>
          </li>
        {% endfor %}
      </ul>
    </nav>
  </div>

  <div class="row">
    {% if matchups %}
      {% if divisional_matchups %}
        <div>
          <h3 class="matchup-type">Divisional Matchups</h3>
          {% for matchup in divisional_matchups %}
            <div class="matchup-wrapper">
              <a class="matchup-link" href="{{ matchup.get_absolute_url }}">                
                <p class="matchup-teams">
                  <span {% if matchup.scoreboard.get_winner == matchup.away_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.away_team.abbreviation }}
                  </span>
                  @
                  <span {% if matchup.scoreboard.get_winner == matchup.home_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.home_team.abbreviation }}
                  </span>
                </p>
                <p class="matchup-score">
                  {% if matchup.week_number < season.week_number %}
                    {{ matchup.scoreboard.away_score }}
                  {% endif %}
                  {% if matchup.week_number < season.week_number %}
                    - {{ matchup.scoreboard.home_score }}
                  {% endif %}
                </p>                
              </a>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% if conference_matchups %}
        <div>
          <h3 class="matchup-type">Conference Matchups</h3>
          {% for matchup in conference_matchups %}
            <div class="matchup-wrapper">
              <a class="matchup-link" href="{{ matchup.get_absolute_url }}">                
                <p class="matchup-teams">
                  <span {% if matchup.scoreboard.get_winner == matchup.away_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.away_team.abbreviation }}
                  </span>
                  @
                  <span {% if matchup.scoreboard.get_winner == matchup.home_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.home_team.abbreviation }}
                  </span>
                </p>
                <p class="matchup-score">
                  {% if matchup.week_number < season.week_number %}
                    {{ matchup.scoreboard.away_score }}
                  {% endif %}
                  {% if matchup.week_number < season.week_number %}
                    - {{ matchup.scoreboard.home_score }}
                  {% endif %}
                </p>                
              </a>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      {% if non_conf_matchups %}
        <div>
          <h3 class="matchup-type">Non-Conference Matchups</h3>
          {% for matchup in non_conf_matchups %}
            <div class="matchup-wrapper">
              <a class="matchup-link" href="{{ matchup.get_absolute_url }}">                
                <p class="matchup-teams">
                  <span {% if matchup.scoreboard.get_winner == matchup.away_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.away_team.abbreviation }}
                  </span>
                  @
                  <span {% if matchup.scoreboard.get_winner == matchup.home_team %}style="color: darkgreen;"{% else %}style="color: darkred;"{% endif %}>
                    {{ matchup.home_team.abbreviation }}
                  </span>
                </p>
                <p class="matchup-score">
                  {% if matchup.week_number < season.week_number %}
                    {{ matchup.scoreboard.away_score }}
                  {% endif %}
                  {% if matchup.week_number < season.week_number %}
                    - {{ matchup.scoreboard.home_score }}
                  {% endif %}
                </p>                
              </a>
            </div>
          {% endfor %}
        </div>
      {% endif %}
      
      {% if bye_teams %}
        <div>
          <h3 class="matchup-type">Bye Weeks</h3>
          {% for bye_team in bye_teams %}
            <div class="matchup-wrapper">
              <a class="matchup-link" href="{% url 'leagues:team_schedule' league.slug bye_team.slug %}">
                <p class="bye-team"><span>{{ bye_team.abbreviation }}</span></p>
              </a>
            </div>
        {% endfor %}
        </div>
      {% endif %}

    {% else %}
      <p>No matchups yet for this week.</p>
    {% endif %}
  </div>
{% endblock content %}
